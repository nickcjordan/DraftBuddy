var tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);var videoPlayer,videoPlaylist,isReady=0,videoIndex=0;function onYouTubeIframeAPIReady(){isReady=1}var ffbVideo={init:function(){ffbVideo.videoLinkSetup(),ffbVideo.videoCarouselSetup(),ffbVideo.videoModal()},videoLinkSetup:function(){jQuery(".ffb-video--link")[0]&&(ffbVideo.appendVideoModal(),ffbVideo.videoLink(),ffbVideo.videoLinkCarouselNav())},videoCarouselSetup:function(){jQuery(".ffb-pp--video--carousel")[0]&&(ffbVideo.appendVideoModal(),ffbVideo.profileModalCarousel(),ffbVideo.profileVideoModal())},appendVideoModal:function(){var e="";e+='<div class="ffb-video--modal">',e+='  <div class="ffb-video--modal--subscribe">',e+='    <div class="g-ytsubscribe" data-channelid="UC-No2ITxJsNt50oJQ3fLmUA" data-layout="default" data-count="default"></div>',e+="  </div>",e+='  <div class="ffb-video--modal--player-info">',e+='    <div class="ffb-video--modal--player-info--photo"></div>',e+='    <div class="ffb-video--modal--player-info--name"></div>',e+="  </div>",e+='  <div class="ffb-video--modal--minimize">',e+='    <svg class="ffb"><use xlink:href="'+ajax_object.svg_url+'#exit-fullscreen"></use></svg>',e+="  </div>",e+='  <div class="ffb-video--modal--expand">',e+='    <svg class="ffb"><use xlink:href="'+ajax_object.svg_url+'#fullscreen"></use></svg>',e+="  </div>",e+='  <div class="ffb-video--modal--close">',e+='    <svg class="ffb"><use xlink:href="'+ajax_object.svg_url+'#close"></use></svg>',e+="  </div>",e+='  <div class="ffb-video--modal--content">',e+='    <div class="ffb-video--modal--content--player">',e+='      <div id="ffb-video--player"></div>',e+="    </div>",e+='    <div class="ffb-video--modal--content--loading"></div>',e+="  </div>",e+="</div>",jQuery(".page-wrap").append(e)},loadingVideoModal:function(){videoPlayer&&(videoPlayer.destroy(),videoPlayer=null),jQuery(".ffb-video--modal").addClass("open"),jQuery(".ffb-video--modal").addClass("loading")},openVideoModal:function(e,o,i,d,a){videoPlayer&&(videoPlayer.destroy(),videoPlayer=null);var l=0;o&&o>=5&&(l=o-5),1==isReady&&(videoPlayer=new YT.Player("ffb-video--player",{height:"540",width:"960",videoId:e,playerVars:{start:l,playsinline:1,rel:0}})),i&&jQuery(".ffb-video--modal--player-info--name").html("<h3>"+i+"</h3>"),d&&jQuery(".ffb-video--modal--player-info--photo").html('<img src="'+d+'" />'),a&&ffbVideo.videoLinkCarousel(a),jQuery(".ffb-video--modal").removeClass("loading"),jQuery(".ffb-video--modal").addClass("open"),videoIndex=0},closeVideoModal:function(){videoPlayer&&(videoPlayer.destroy(),videoPlayer=null),jQuery(".ffb-video--modal--player-info--photo").html(""),jQuery(".ffb-video--modal--player-info--name").html(""),jQuery(".ffb-video--modal--content--prev").remove(),jQuery(".ffb-video--modal--content--next").remove(),jQuery(".ffb-video--video-link--carousel").remove()},profileModalCarousel:function(){var e=jQuery(".ffb-pp--video--carousel").clone();e.children(".video-button-next").removeClass("video-button-next").addClass("video-modal-button-next"),e.children(".video-button-prev").removeClass("video-button-prev").addClass("video-modal-button-prev"),e.removeClass("ffb-pp--video--carousel").addClass("ffb-video--modal--carousel"),e.appendTo(".ffb-video--modal--content"),ffbVideo.initProfileCarousel(),ffbVideo.initModalCarousel()},initProfileCarousel:function(){profileVideoCarousel=new Swiper(".ffb-pp--video--carousel .video-container",{spaceBetween:10,slidesPerView:2.2,slidesPerGroup:2,freeMode:!0,navigation:{nextEl:".video-button-next",prevEl:".video-button-prev"},breakpoints:{480:{slidesPerView:3.2,slidesPerGroup:3},768:{slidesPerView:4.2,slidesPerGroup:4},960:{slidesPerView:3.2,slidesPerGroup:3},1150:{slidesPerView:4.3,slidesPerGroup:4},1280:{slidesPerView:5.3,slidesPerGroup:5},1400:{slidesPerView:6.3,slidesPerGroup:6}}})},initModalCarousel:function(){modalVideoCarousel=new Swiper(".ffb-video--modal--carousel .video-container",{spaceBetween:10,slidesPerView:2.2,slidesPerGroup:2,freeMode:!0,navigation:{nextEl:".video-modal-button-next",prevEl:".video-modal-button-prev"},breakpoints:{480:{slidesPerView:3.2,slidesPerGroup:3},768:{slidesPerView:5.2,slidesPerGroup:5},960:{slidesPerView:6.2,slidesPerGroup:6}}})},reInitModalCarousel:function(){setTimeout((function(){modalVideoCarousel.update()}),250)},videoLink:function(){jQuery("body").on("click",".ffb-video--link",(function(e){e.preventDefault(),ffbVideo.loadingVideoModal();var o=jQuery(this).data("id"),i=jQuery(this).data("name"),d=jQuery(this).data("photo");function a(e){var o=e.pods;ffbVideo.openVideoModal(o[0].youtube_id,Number(o[0].timestamp),i,d,o)}jQuery(this).hasClass("start-sit")?ffbss_getPlayerPods(o,a):window.udk.getPlayerPods(o,a)}))},videoLinkCarousel:function(e){jQuery(".ffb-video--modal").addClass("with-carousel"),jQuery(".ffb-video--modal--content--player").prepend('<div class="ffb-video--modal--content--player--prev"><div><svg class="ffb"><use xlink:href="'+ajax_object.svg_url+'#arrow-left"></use></svg></div></div>'),jQuery(".ffb-video--modal--content--player").prepend('<div class="ffb-video--modal--content--player--next"><div><svg class="ffb"><use xlink:href="'+ajax_object.svg_url+'#arrow-right"></use></svg></div></div>'),jQuery(".ffb-video--modal--content--player").removeClass("prev"),jQuery(".ffb-video--modal--content--player").addClass("next"),jQuery(".ffb-video--modal--carousel").remove(),videoIndex=0,videoPlaylist=e;var o="";o+='<div class="ffb-video--carousel ffb-video--modal--carousel ffb-video--video-link--carousel">',o+='  <div class="video-container">',o+='    <div class="swiper-wrapper"></div>',o+="  </div>",o+='  <div class="video-modal-button-prev"><svg class="ffb"><use xlink:href="'+ajax_object.svg_url+'#arrow-left"></use></svg></div>',o+='  <div class="video-modal-button-next"><svg class="ffb"><use xlink:href="'+ajax_object.svg_url+'#arrow-right"></use></svg></div>',o+="</div>",jQuery(".ffb-video--modal--content").append(o),videoPlaylist.forEach((function(e,o){var i=new Date(e.aired),d=dayjs(i).format("ddd"),a=dayjs(i).format("MMM D"),l="",r="";o==videoIndex&&(r="playing"),l+='<div class="swiper-slide">',l+="  <article>",l+='    <a href="#" data-id="'+e.youtube_id+'" data-start="'+e.timestamp+'" class="'+r+'">',l+='      <div class="video-date">',l+='        <div class="video-date--play">',l+='          <svg class="ffb play-background"><use xlink:href="'+ajax_object.svg_url+'#youtube"></use></svg>',l+='          <svg class="ffb play-foreground"><use xlink:href="'+ajax_object.svg_url+'#youtube-play"></use></svg>',l+="        </div>",l+='        <div class="video-date--now-playing">Now Playing</div>',l+='        <div class="video-date--overlay"></div>',l+='        <div class="video-date--content">',l+='          <span class="day">'+d+"</span>",l+='          <span class="date">'+a+"</span>",l+="        </div>",l+="      </div>",l+='      <img src="https://img.youtube.com/vi/'+e.youtube_id+'/0.jpg" alt="'+e.title+'" />',l+="    </a>",l+="  </article>",l+="</div>",jQuery(".ffb-video--modal--carousel .swiper-wrapper").append(l)})),ffbVideo.initModalCarousel()},videoLinkCarouselNav:function(){jQuery("body").on("click",".ffb-video--modal--content--player--next",(function(){ffbVideo.videoLinkCarouselNext()})),jQuery("body").on("click",".ffb-video--modal--content--player--prev",(function(){ffbVideo.videoLinkCarouselPrev()})),jQuery("body").on("click",".video-container a",(function(e){e.preventDefault(),jQuery(".video-container a").removeClass("playing"),jQuery(this).addClass("playing"),videoIndex=jQuery(this).parents(".swiper-slide").index();var o=videoPlaylist.length-1,i=jQuery(this).data("id"),d=jQuery(this).data("start"),a=jQuery(this).data("name"),l=jQuery(this).data("photo");jQuery(".ffb-video--modal--carousel .video-container a").removeClass("playing"),jQuery(".ffb-video--modal--carousel .video-container .swiper-slide:eq("+videoIndex+") a").addClass("playing"),videoIndex==o?(jQuery(".ffb-video--modal--content--player").removeClass("next"),jQuery(".ffb-video--modal--content--player").addClass("prev")):0==videoIndex?(jQuery(".ffb-video--modal--content--player").addClass("next"),jQuery(".ffb-video--modal--content--player").removeClass("prev")):(jQuery(".ffb-video--modal--content--player").addClass("next"),jQuery(".ffb-video--modal--content--player").addClass("prev")),ffbVideo.openVideoModal(i,d,a,l)}))},videoLinkCarouselNext:function(){videoIndex++,jQuery(".ffb-video--modal--carousel a").removeClass("playing"),jQuery(".ffb-video--modal--carousel .swiper-wrapper").children().eq(videoIndex).find("a").addClass("playing");var e=videoPlaylist[videoIndex],o=videoPlaylist.length-1,i=e.timestamp,d=e.youtube_id;videoPlayer&&(videoPlayer.destroy(),videoPlayer=null);var a=0;i&&i>=5&&(a=i-5),1==isReady&&(videoPlayer=new YT.Player("ffb-video--player",{height:"540",width:"960",videoId:d,playerVars:{start:a,playsinline:1,rel:0}})),videoIndex==o&&jQuery(".ffb-video--modal--content--player").removeClass("next"),videoIndex>0&&jQuery(".ffb-video--modal--content--player").addClass("prev")},videoLinkCarouselPrev:function(){videoIndex-=1,jQuery(".ffb-video--modal--carousel a").removeClass("playing"),jQuery(".ffb-video--modal--carousel .swiper-wrapper").children().eq(videoIndex).find("a").addClass("playing");var e=videoPlaylist[videoIndex],o=videoPlaylist.length-1,i=e.timestamp,d=e.youtube_id;videoPlayer&&(videoPlayer.destroy(),videoPlayer=null);var a=0;i&&i>=5&&(a=i-5),1==isReady&&(videoPlayer=new YT.Player("ffb-video--player",{height:"540",width:"960",videoId:d,playerVars:{start:a,playsinline:1,rel:0}})),videoIndex!=o&&jQuery(".ffb-video--modal--content--player").addClass("next"),videoIndex<1&&jQuery(".ffb-video--modal--content--player").removeClass("prev")},videoModal:function(){jQuery(".ffb-video--modal--close").click((function(){jQuery(".ffb-video--modal").removeClass("open"),jQuery(".video-container a").removeClass("playing"),ffbVideo.closeVideoModal()})),jQuery(".ffb-video--modal--expand").click((function(){jQuery(this).parent().addClass("fullscreen"),ffbVideo.reInitModalCarousel()})),jQuery(".ffb-video--modal--minimize").click((function(){jQuery(this).parent().removeClass("fullscreen")}))},profileVideoModal:function(){jQuery("body").on("click",".video-container a",(function(e){e.preventDefault(),jQuery(".video-container a").removeClass("playing"),jQuery(this).addClass("playing");var o=jQuery(this).data("id"),i=jQuery(this).data("start"),d=jQuery(this).data("name"),a=jQuery(this).data("photo");if(jQuery(this).parents(".ffb-pp--video--carousel").length){var l=jQuery(this).parents(".swiper-slide").index();jQuery(".ffb-video--modal--carousel .video-container a").removeClass("playing"),jQuery(".ffb-video--modal--carousel .video-container .swiper-slide:eq("+l+") a").addClass("playing")}if(jQuery(this).parents(".ffb-video--modal--carousel").length){l=jQuery(this).parents(".swiper-slide").index();jQuery(".ffb-pp--video .video-container a").removeClass("playing"),jQuery(".ffb-pp--video .video-container .swiper-slide:eq("+l+") a").addClass("playing")}ffbVideo.openVideoModal(o,i,d,a)}))}};jQuery("document").ready((function(){ffbVideo.init()}));